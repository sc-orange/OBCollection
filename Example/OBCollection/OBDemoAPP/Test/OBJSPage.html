
<!DOCTYPE html>

<head>
    <title>JS交互OC</title>
    <meta charset="utf-8">
        </head>

<!--   CSS语法-->
<style type='text/css'>
    img{
        cursor:pointer;
    }
   </style>

<body>
    
    <h2 style="text-align:center">Welcome</h2>
    
    <p style="text-align:center"> <input id="input1" type="text" name="fname" />
    
    <p style="text-align:center"> <a href="javascript:void(0);" onclick = "gotoWeb()" >简书主页</a> </p>
    
    <p style="text-align:center"> <button id="btn1" type = "button" onclick = "jsToOcFunction1()" > JS调用OC：不带参数  </button> </p>
    
    <p style="text-align:center"> <button id="btn2" type = "button" onclick = "jsToOcFunction2()"> JS调用OC：带参数  </button> </p>
    
    <p style="text-align:center"> <button id="btn3" type = "button" onclick = "showAlert()" > 确认框  </button> </p>
    
    <p style="text-align:center"> <button id="btn4" type = "button" onclick = "showAlert1()" > 确认取消框  </button> </p>
    
    <p style="text-align:center"> <button id="btn5" type = "button" onclick = "showText()" > 输入框  </button> </p>
    
    <!--        JS语法-->
    <script type = "text/javascript">
        
    function gotoWeb()
    {
        var input = document.getElementById("input1");
        window.location.href = input.value;
    }
        
    function jsToOcFunction1()
    {
       window.webkit.messageHandlers.jsToOcNoPrams.postMessage({});
    }
    
    function jsToOcFunction2()
    {
        window.webkit.messageHandlers.jsToOcWithPrams.postMessage({"params":"我是参数"});
    }
    
    function showAlert()
    {
        alert("我是确认框");
    }
    
    function showAlert1()
    {
        if (confirm("我是确认/取消框")==true)
        {
            alert("选的确定");
        }else{
            alert("选的取消");
        }
    }
    
    function showText()
    {
        var text = prompt("我是输入框", "请输入：");
        alert(text);
    }
    
    //OC调用JS改变背景色
    function changeColor(parameter)
    {
        document.body.style.backgroundColor = randomColor();
        alert(parameter);
    }
    
    //随机生成颜色
    function randomColor()
    {
        var r=Math.floor(Math.random()*256);
        var g=Math.floor(Math.random()*256);
        var b=Math.floor(Math.random()*256);
        return "rgb("+r+','+g+','+b+")";//所有方法的拼接都可以用ES6新特性`其他字符串{$变量名}`替换
    }
    
    // 切换图片
    function changePicture(id, path) {
        var image = document.getElementById(id);
        image.src = path;
    }
    
    </script>
    
</body>

</html>
